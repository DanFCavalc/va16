<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Sistema de Busca e Gest√£o de Ve√≠culos Apreendidos</title>
    
    <!-- CSS Modular -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body>
    <!-- CABE√áALHO -->
    <div class="header">
        <div class="container">
            <div class="header-content">
                <span class="header-icon">üöì</span>
                <div class="header-text">
                    <h1>BUSCA E GEST√ÉO DE VE√çCULOS APREENDIDOS</h1>
                    <div class="subtitle">16¬∫ Distrito Policial - Vila Clementino</div>
                </div>
            </div>
        </div>
    </div>

    <!-- LAYOUT PRINCIPAL -->
    <div class="container">
        <div class="main-layout">
            
            <!-- BARRA LATERAL -->
            <div class="sidebar">
                
                <!-- Card de Pesquisas -->
                <div class="sidebar-card">
                    <div class="card-header" onclick="UI.toggleCard(this)">
                        <span class="card-title">Pesquisas</span>
                        <span class="card-chevron">‚ñº</span>
                    </div>
                    <div class="card-content">
                        <div class="search-box">
                            <input class="search-input" id="searchInput" 
                                   placeholder="Buscar por placa, modelo, SPJ..." type="text"/>
                            <span class="search-icon">üîç</span>
                            <div class="autocomplete-dropdown" id="autocompleteDropdown"></div>
                        </div>
                        <div class="recent-searches" id="recentSearches">
                            <!-- Hist√≥rico ser√° preenchido via JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Card de Filtros -->
                <div class="sidebar-card">
                    <div class="card-header" onclick="UI.toggleCard(this)">
                        <span class="card-title">Filtros</span>
                        <span class="card-chevron">‚ñº</span>
                    </div>
                    <div class="card-content">
                        <div class="filters">
                            
                            <!-- Filtro Status -->
                            <div class="filter-group">
                                <label class="filter-label">Status</label>
                                <select class="filter-select" id="statusFilter">
                                    <option value="">Todos</option>
                                </select>
                            </div>
                            
                            <!-- Filtro P√°tio -->
                            <div class="filter-group">
                                <label class="filter-label">P√°tio</label>
                                <select class="filter-select" id="patioFilter">
                                    <option value="">Todos</option>
                                </select>
                            </div>
                            
                            <!-- Filtro Circunscri√ß√£o -->
                            <div class="filter-group">
                                <label class="filter-label">Circunscri√ß√£o</label>
                                <select class="filter-select" id="circunscricaoFilter">
                                    <option value="">Todas</option>
                                </select>
                            </div>
                            
                            <!-- Filtro Tipo de Ve√≠culo -->
                            <div class="filter-group">
                                <label class="filter-label">Tipo de Ve√≠culo</label>
                                <div class="checkbox-group" id="tipoFilter">
                                    <!-- Checkboxes ser√£o preenchidos via JavaScript -->
                                </div>
                            </div>
                            
                            <!-- Filtro Data -->
                            <div class="filter-group">
                                <label class="filter-label">Data da Apreens√£o</label>
                                <div class="date-shortcuts">
                                    <button class="date-shortcut" data-days="0">Hoje</button>
                                    <button class="date-shortcut" data-days="7">7 dias</button>
                                    <button class="date-shortcut" data-days="30">30 dias</button>
                                    <button class="date-shortcut" data-days="90">3 meses</button>
                                </div>
                                <div class="date-range">
                                    <input class="filter-input" id="dateFrom" placeholder="dd/mm/aaaa" type="text" maxlength="10"/>
                                    <input class="filter-input" id="dateTo" placeholder="dd/mm/aaaa" type="text" maxlength="10"/>
                                </div>
                            </div>
                            
                            <button class="clear-filters" onclick="Filters.clearAll()">Limpar Filtros</button>
                        </div>
                    </div>
                </div>

                <!-- Card de Fun√ß√µes -->
                <div class="sidebar-card">
                    <div class="card-header" onclick="UI.toggleCard(this)">
                        <span class="card-title">Fun√ß√µes</span>
                        <span class="card-chevron">‚ñº</span>
                    </div>
                    <div class="card-content">
                        <div class="functions-card">
                            <div class="function-item" onclick="UI.handleFunction('cadastrar')">
                                <span class="function-icon">‚ûï</span>
                                <span>Cadastrar Ve√≠culo</span>
                            </div>
                            <div class="function-item" onclick="UI.handleFunction('relatorio')">
                                <span class="function-icon">üìä</span>
                                <span>Gerar Relat√≥rio</span>
                            </div>
                            <div class="function-item" onclick="UI.handleFunction('backup')">
                                <span class="function-icon">üíæ</span>
                                <span>Fazer Backup</span>
                            </div>
                            <div class="function-item" onclick="UI.handleFunction('settings')">
                                <span class="function-icon">‚öôÔ∏è</span>
                                <span>Configura√ß√µes</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- √ÅREA DE CONTE√öDO -->
            <div class="content-area">
                
                <!-- Card de Resultados -->
                <div class="main-content">
                    <div class="results-header" onclick="UI.toggleCard(this)">
                        <span class="results-title">Resultados Completos</span>
                        <span class="results-chevron">‚ñº</span>
                    </div>
                    <div class="results-content">
                        
                        <!-- Filtros Ativos com Bot√£o de Configura√ß√£o de Colunas -->
                        <div class="active-filters" id="activeFilters">
                            <div class="filters-content">
                                <span style="color: #94a3b8; font-size: 12px; font-weight: 600; margin-right: 8px;">
                                    Filtros Ativos:
                                </span>
                                <span id="no-filters-msg" style="color: #64748b; font-size: 12px; font-style: italic;">
                                    Nenhum
                                </span>
                                <!-- Badges de filtros ser√£o adicionados aqui dinamicamente -->
                            </div>
                            <div class="filters-actions">
                                <button class="column-settings-btn" onclick="ColumnManager.openModal()" title="Configurar Colunas">
                                    <span class="settings-icon">‚öôÔ∏è</span>
                                    <span class="settings-text">Colunas</span>
                                </button>
                            </div>
                        </div>

                        <!-- Loading -->
                        <div class="loading-spinner" id="loadingSpinner">
                            <div class="spinner"></div>
                        </div>

                        <!-- Mensagem de Erro -->
                        <div class="error-message" id="errorMessage">
                            Erro ao carregar dados. Tente novamente.
                        </div>

                        <!-- Tabela de Resultados -->
                        <div class="table-container" id="tableContainer">
                            <table class="results-table">
                                <thead>
                                    <tr id="tableHeader">
                                        <!-- Cabe√ßalhos ser√£o preenchidos via JavaScript -->
                                    </tr>
                                </thead>
                                <tbody id="tableBody">
                                    <!-- Linhas ser√£o preenchidas via JavaScript -->
                                </tbody>
                            </table>
                        </div>

                        <!-- Pagina√ß√£o -->
                        <div class="pagination" id="pagination">
                            <!-- Pagina√ß√£o ser√° preenchida via JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Card de Detalhes -->
                <div class="details-card">
                    <div class="details-header" onclick="UI.toggleCard(this)">
                        <span class="details-title">Detalhes do Ve√≠culo</span>
                        <span class="details-chevron collapsed">‚ñº</span>
                    </div>
                    <div class="details-content collapsed">
                        <div class="vehicle-details" id="vehicleDetailsContent">
                            <!-- Estado inicial: nenhum ve√≠culo selecionado -->
                            <div style="display: flex; align-items: center; justify-content: center; min-height: 200px; text-align: center;">
                                <div>
                                    <div style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;">üîç</div>
                                    <div style="color: #94a3b8; font-size: 16px; font-weight: 600; margin-bottom: 8px;">
                                        Nenhum ve√≠culo selecionado
                                    </div>
                                    <div style="color: #64748b; font-size: 14px;">
                                        Pesquise e selecione um ve√≠culo acima
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Configura√ß√£o de Colunas -->
    <div class="modal-overlay" id="columnModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Configurar Colunas da Tabela</h2>
                <button class="modal-close" onclick="ColumnManager.closeModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="column-stats">
                    <span>Mostrando <strong id="visibleCount">0</strong> de <strong id="totalCount">0</strong> colunas</span>
                </div>
                
                <div class="column-actions">
                    <button class="action-btn secondary" onclick="ColumnManager.toggleAll(true)">Mostrar Todas</button>
                    <button class="action-btn secondary" onclick="ColumnManager.toggleAll(false)">Ocultar Todas</button>
                    <button class="action-btn primary" onclick="ColumnManager.resetToDefault()">Padr√£o</button>
                </div>
                
                <div class="columns-container">
                    <div class="column-section">
                        <h3>
                            üìã Colunas Vis√≠veis
                            <span class="drag-instruction">Arraste para ocultar ‚Üí</span>
                        </h3>
                        <div class="column-list" id="visibleColumnsList">
                            <!-- Colunas vis√≠veis ser√£o preenchidas via JavaScript -->
                        </div>
                    </div>
                    
                    <div class="column-section">
                        <h3>
                            üëÅÔ∏è‚Äçüó®Ô∏è Colunas Ocultas
                            <span class="drag-instruction">‚Üê Arraste para mostrar</span>
                        </h3>
                        <div class="column-list" id="hiddenColumnsList">
                            <!-- Colunas ocultas ser√£o preenchidas via JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <div class="modal-footer-left">
                    üí° Arraste as colunas entre as listas para mostrar/ocultar
                </div>
                <button class="action-btn secondary" onclick="ColumnManager.closeModal()">Fechar</button>
            </div>
        </div>
    </div>

    <!-- JavaScript Modular -->
    <script src="{{ url_for('static', filename='js/config.js') }}"></script>
    <script src="{{ url_for('static', filename='js/utils.js') }}"></script>
    <script src="{{ url_for('static', filename='js/api.js') }}"></script>
    <script src="{{ url_for('static', filename='js/ui.js') }}"></script>
    <script src="{{ url_for('static', filename='js/filters.js') }}"></script>
    <script src="{{ url_for('static', filename='js/search.js') }}"></script>
    <script src="{{ url_for('static', filename='js/table.js') }}"></script>
    <script src="{{ url_for('static', filename='js/details.js') }}"></script>
    <script src="{{ url_for('static', filename='js/columns.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>